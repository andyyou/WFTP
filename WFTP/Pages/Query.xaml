<UserControl x:Class="WFTP.Pages.Query"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:odc="clr-namespace:Odyssey.Controls;assembly=Odyssey"
             mc:Ignorable="d" 
             d:DesignHeight="561"
             d:DesignWidth="778"
             FontFamily="Microsoft JhengHei">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/Icons.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedSingleRowTabControl.xaml" />
            </ResourceDictionary.MergedDictionaries>

            <Style TargetType="ListView">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListView">
                            <Border Background="{TemplateBinding ListView.Background}">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <WrapPanel Orientation="Horizontal" 
                                               Width="520"
                                               VerticalAlignment="Top"
                                               HorizontalAlignment="Center"
                                               IsItemsHost="True" />
                                </ScrollViewer>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <GridView x:Key="ListView">
                <GridViewColumn Header="FileName" />
                <GridViewColumn Header="FilePath" />
            </GridView>

            <ListView x:Key="TileView">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <WrapPanel Orientation="Horizontal"
                               Width="520"
                               VerticalAlignment="Top"
                               HorizontalAlignment="Center"
                               IsItemsHost="True" />
                </ScrollViewer>
            </ListView>

            <XmlDataProvider x:Key="dataProvider" XPath="bc">
                <x:XData>
                    <bc xmlns="" title="分類" />
                </x:XData>
            </XmlDataProvider>
            <HierarchicalDataTemplate DataType="bc" 
                  ItemsSource="{Binding XPath=*}">
                <TextBlock Text="{Binding XPath=@title}" 
                  Foreground="#FF41BEE1"/>
            </HierarchicalDataTemplate>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <TabControl>
            <TabItem Header="一般查詢">
                <DockPanel Margin="5">
                    <WrapPanel DockPanel.Dock="Top">
                        <Rectangle Width="20" Height="20">
                            <Rectangle.Resources>
                                <SolidColorBrush x:Key="BlackBrush" Color="#FF41BEE1" />
                            </Rectangle.Resources>
                            <Rectangle.Fill>
                                <VisualBrush Stretch="Fill" Visual="{StaticResource appbar_arrow_right}" />
                            </Rectangle.Fill>
                        </Rectangle>
                        <Rectangle Width="5" Height="20"/>
                        <odc:BreadcrumbBar x:Name="navBar"
                                           TraceBinding="{Binding XPath=@title}"
                                           Root="{StaticResource dataProvider}"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch"
                                           Width="755"
                                           PathChanged="navBar_PathChanged" />
                    </WrapPanel>
                    <WrapPanel DockPanel.Dock="Bottom">
                        <Button  Name="btnTileView" Height="20" Width="50" Content="Tile" Click="btnTileView_Click" />
                        <Button Name="btnListView" Height="20" Width="50" Content="List" Click="btnListView_Click" />
                        <ListView Name="lvwClassify" Width="760" Height="447" SelectionMode="Single" Margin="0,10,0,0" />
                    </WrapPanel>
                </DockPanel>
            </TabItem>
            <TabItem Header="進階查詢">

            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
